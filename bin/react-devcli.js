#!/usr/bin/env node
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var fs=_interopDefault(require("fs")),path=_interopDefault(require("path")),util=_interopDefault(require("util")),chalk=_interopDefault(require("chalk")),yargs=_interopDefault(require("yargs")),find=_interopDefault(require("find"));function __awaiter(c,s,i,l){return new(i||(i=Promise))(function(e,n){function o(e){try{r(l.next(e))}catch(e){n(e)}}function t(e){try{r(l.throw(e))}catch(e){n(e)}}function r(n){n.done?e(n.value):new i(function(e){e(n.value)}).then(o,t)}r((l=l.apply(c,s||[])).next())})}require("babel-polyfill");var classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},createClass=function(){function t(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),inherits=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},possibleConstructorReturn=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n},ACommand=function e(n,o,t){classCallCheck(this,e),this.name=n,this.description=o,this.options=t},Action=function(e){function n(){classCallCheck(this,n);return possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"action","Action description",{component:{alias:"c",demand:!1,describe:"Create component alongside action file"}}))}return inherits(n,ACommand),createClass(n,[{key:"run",value:function(e,n){console.log(e),console.log(n)}},{key:"help",value:function(e){console.log(e)}},{key:"remove",value:function(e){console.log(e)}},{key:"test",value:function(e){console.log(e)}},{key:"make",value:function(e){console.log(e)}}]),n}(),Action$1=new Action,Command=function(e){function n(){classCallCheck(this,n);return possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"command","Command description",{}))}return inherits(n,ACommand),createClass(n,[{key:"run",value:function(e,n){console.log(n),console.log(e)}},{key:"help",value:function(e){console.log(e)}},{key:"remove",value:function(e){console.log(e)}},{key:"make",value:function(e){console.log(e)}}]),n}(),Command$1=new Command,readFile=util.promisify(fs.readFile),writeFile=util.promisify(fs.writeFile),Component=function(e){function n(){classCallCheck(this,n);return possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"component","Component description",{}))}return inherits(n,ACommand),createClass(n,[{key:"run",value:function(e,o){var t=this;console.log("Hello");var r=e._[1];r?readFile(path.relative(__dirname,path.resolve(__dirname,"..","src","templates","components","Stateless.jsx"))).then(function(e){return Promise.resolve(e.toString().split("$NAME").join("SomeName"))}).then(function(n){return __awaiter(t,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return fs.existsSync(path.resolve(o.path))||fs.mkdirSync(path.resolve(o.path)),e.next=3,writeFile(path.resolve(o.path,r+".jsx"),n);case 3:case"end":return e.stop()}},e,this)}))}):console.log(chalk.red("Specify a component name!"))}},{key:"help",value:function(e){console.log(e)}},{key:"remove",value:function(e){console.log(e)}},{key:"test",value:function(e){console.log(e)}},{key:"make",value:function(e){console.log(e)}},{key:"serve",value:function(e){console.log(e)}}]),n}(),Component$1=new Component,Help=function(e){function n(){classCallCheck(this,n);return possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"help","Help description",{}))}return inherits(n,ACommand),createClass(n,[{key:"run",value:function(e){console.log("Help options:"),console.log(e)}},{key:"help",value:function(e){console.log(e)}}]),n}(),Help$1=new Help,Reducer=function(e){function n(){classCallCheck(this,n);return possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"reducer","Reducer description",{}))}return inherits(n,ACommand),createClass(n,[{key:"run",value:function(e,n){console.log(e),console.log(n)}},{key:"help",value:function(e){console.log(e)}},{key:"remove",value:function(e){console.log(e)}},{key:"test",value:function(e){console.log(e)}},{key:"make",value:function(e){console.log(e)}}]),n}(),Reducer$1=new Reducer,Selector=function(e){function n(){classCallCheck(this,n);return possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"reducer","Reducer description",{}))}return inherits(n,ACommand),createClass(n,[{key:"run",value:function(e,n){console.log(e),console.log(n)}},{key:"help",value:function(e){console.log(e)}},{key:"remove",value:function(e){console.log(e)}},{key:"test",value:function(e){console.log(e)}},{key:"make",value:function(e){console.log(e)}}]),n}(),Selector$1=new Selector,Serve=function(e){function n(){classCallCheck(this,n);return possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"server","Serve description",{}))}return inherits(n,ACommand),createClass(n,[{key:"run",value:function(e,n){console.log(n),console.log(e)}},{key:"help",value:function(e){console.log(e)}}]),n}(),Serve$1=new Serve,Test=function(e){function n(){classCallCheck(this,n);return possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,"test","Test description",{}))}return inherits(n,ACommand),createClass(n,[{key:"run",value:function(e,n){console.log(e),console.log(n)}},{key:"help",value:function(e){console.log(e)}},{key:"remove",value:function(e){console.log(e)}},{key:"test",value:function(e){console.log(e)}},{key:"make",value:function(e){console.log(e)}}]),n}(),Test$1=new Test,Argv=yargs.command(Component$1.name,Component$1.description,Component$1.options).command(Reducer$1.name,Reducer$1.description,Reducer$1.options).command(Selector$1.name,Selector$1.description,Selector$1.options).command(Action$1.name,Action$1.description,Action$1.options).command(Test$1.name,Test$1.description,Test$1.options).command(Command$1.name,Command$1.description,Command$1.options).command(Serve$1.name,Serve$1.description,Serve$1.options).command(Help$1.name,Help$1.description,Help$1.options).help().argv,Component$2=Component$1,Reducer$2=Reducer$1,Selector$2=Selector$1,Action$2=Action$1,Test$2=Test$1,Command$2=Command$1,Serve$2=Serve$1,Help$2=Help$1,defaultConfiguration=function(){return{components:{path:process.cwd()+"/components",propTypes:!0,scssFile:!0,index:!1,exportFromIndex:!1},reducers:{path:process.cwd()+"/reducers",componentBased:!1},actions:{path:process.cwd()+"/actions",componentBased:!1,index:!1,separateActionTypes:!1},selectors:{path:process.cwd()+"/selectors",componentBased:!1},tests:{path:process.cwd()+"/__tests__",componentBased:!1},commands:{path:process.cwd()+"/react-devcli/commands"},templates:{path:process.cwd()+"/react-devcli/templates"},engines:{language:"js",testing:{},linting:{}}}},load=function(){return new Promise(function(o,t){find.file(/react\.config\.js$/,process.cwd(),function(e){if(e.length){var n=e[e.length-1];o(require(n)())}else o(defaultConfiguration());t("Could not load configuration file")})})},_this=void 0;__awaiter(_this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,load();case 2:n=e.sent,e.t0=Argv._[0],e.next=e.t0===Component$2.name?6:e.t0===Reducer$2.name?8:e.t0===Selector$2.name?10:e.t0===Action$2.name?12:e.t0===Test$2.name?14:e.t0===Command$2.name?16:e.t0===Serve$2.name?18:20;break;case 6:return Component$2.run(Argv,n.components),e.abrupt("break",22);case 8:return Reducer$2.run(Argv,n.reducers),e.abrupt("break",22);case 10:return Selector$2.run(Argv,n.selectors),e.abrupt("break",22);case 12:return Action$2.run(Argv,n.actions),e.abrupt("break",22);case 14:return Test$2.run(Argv,n.tests),e.abrupt("break",22);case 16:return Command$2.run(Argv,n.commands),e.abrupt("break",22);case 18:return Serve$2.run(Argv,n.serve),e.abrupt("break",22);case 20:console.log("None"),Help$2.run(Argv);case 22:case"end":return e.stop()}},e,this)}));
